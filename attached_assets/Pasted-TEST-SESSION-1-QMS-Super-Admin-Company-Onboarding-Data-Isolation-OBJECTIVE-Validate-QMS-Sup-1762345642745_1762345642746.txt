TEST SESSION 1: QMS Super Admin - Company Onboarding & Data Isolation

OBJECTIVE: Validate QMS Super Admin can onboard two companies (ABC Corp, XYZ Manufacturing) and verify proper data isolation boundaries.

APPLICATION URL: [YOUR_SYSCOMPLY_URL]

QMS ADMIN CREDENTIALS:
- Email: admin@idatum.com
- Password: Admin@123

COMPANY 1 - ABC CORP:
- Company Name: ABC Corp
- Industry: IT Services
- Domain: abc.com
- Framework: ISO 27001
- Admin Name: John Smith
- Admin Email: himanshusochi@gmail.com

COMPANY 2 - XYZ MANUFACTURING:
- Company Name: XYZ Manufacturing
- Industry: Manufacturing
- Domain: xyz.com
- Framework: ISO 9001
- Admin Name: Sarah Johnson
- Admin Email: hjoshinitin1999@gmail.com

---

TEST 1-1: Admin Login & Dashboard Access
STEPS:
1. Navigate to login page
2. Enter email: admin@idatum.com
3. Enter password: Admin@123
4. Click "Login" button
5. Wait for page load (max 5 seconds)

SUCCESS CRITERIA:
✓ Dashboard loads successfully
✓ Greeting message displays (contains "Admin" or "Welcome")
✓ Navigation menu shows "Organization Onboarding" or "Companies" module
✓ URL contains /dashboard or /admin
✓ No error messages visible

FAILURE INDICATORS:
✗ Error message appears on screen
✗ Stuck on login page after 5 seconds
✗ 403/401 error code
✗ "Organization Onboarding" module not visible in menu
✗ Blank page or loading spinner indefinitely

---

TEST 1-2: Create First Company - ABC Corp
STEPS:
1. From dashboard, locate and click "Organization Onboarding" or "Add Company"
2. Click "Create Company" or "Add New Company" button
3. Fill company information form:
   - Company Name: ABC Corp
   - Industry: IT Services (select from dropdown)
   - Domain: abc.com
   - Framework: ISO 27001 (select from dropdown)
4. Fill Company Admin details:
   - Name: John Smith
   - Email: himanshusochi@gmail.com
   - Role: Company Admin (auto-selected or from dropdown)
5. Click "Create" or "Submit" button
6. Wait for confirmation message (max 5 seconds)

SUCCESS CRITERIA:
✓ Form submission successful
✓ Success message displays: "Company created successfully" or "Company onboarded" or similar
✓ Modal closes automatically OR redirects to companies list
✓ ABC Corp appears in companies list/table
✓ Company status shows "Active" or "Pending Verification"
✓ No error messages

FAILURE INDICATORS:
✗ Form validation errors appear
✗ "Email already exists" error (indicates database not clean)
✗ Submission fails with server error
✗ ABC Corp does not appear in companies list
✗ Page hangs or times out

---

TEST 1-3: Email Verification - ABC Corp Admin
OBJECTIVE: Confirm email delivery system works correctly

STEPS:
1. Agent pauses testing
2. Agent displays message: "PLEASE CHECK himanshusochi@gmail.com INBOX"
3. USER ACTION: Check inbox for email from SysComply
4. USER ACTION: Copy password from email
5. USER ACTION: Paste password into credentials tracker spreadsheet

SUCCESS CRITERIA:
✓ Email received within 2 minutes at himanshusochi@gmail.com
✓ Email subject contains "Welcome" or "Account Created" or "Credentials"
✓ Email body contains:
  - Username/Email: himanshusochi@gmail.com
  - Password: [auto-generated]
  - Login link to SysComply
✓ Email from SysComply domain or system email

FAILURE INDICATORS:
✗ No email received after 3 minutes
✗ Email goes to spam folder
✗ Email missing password or login link
✗ Email sent to wrong address

USER CONFIRMATION REQUIRED:
After receiving email, user responds to Agent: "Email received, password saved"

---

TEST 1-4: Verify ABC Corp in Companies List
STEPS:
1. From QMS Admin dashboard, navigate to "Companies" or "Organization Management"
2. Locate "ABC Corp" in companies table/list
3. Click on ABC Corp row to view details
4. Verify all company information displays correctly

SUCCESS CRITERIA:
✓ ABC Corp visible in active companies list
✓ Company details page shows:
  - Company Name: ABC Corp
  - Industry: IT Services
  - Domain: abc.com
  - Framework: ISO 27001
  - Admin: John Smith
  - Admin Email: himanshusochi@gmail.com
  - Status: Active
  - Creation Date: Today's date (Nov 5, 2025)
✓ Company ID/unique identifier visible
✓ No missing fields

---

TEST 1-5: Create Second Company - XYZ Manufacturing
STEPS:
1. Click "Add New Company" or "Create Company" button
2. Fill company information:
   - Company Name: XYZ Manufacturing
   - Industry: Manufacturing
   - Domain: xyz.com
   - Framework: ISO 9001
3. Fill Company Admin details:
   - Name: Sarah Johnson
   - Email: hjoshinitin1999@gmail.com
   - Role: Company Admin
4. Click "Create" button
5. Wait for confirmation

SUCCESS CRITERIA:
✓ Form submits successfully
✓ Success message appears
✓ XYZ Manufacturing appears in companies list
✓ Both ABC Corp AND XYZ Manufacturing now visible in list
✓ Two separate, distinct company entries exist
✓ Each company shows different admin email

FAILURE INDICATORS:
✗ Form validation fails
✗ Only one company visible (ABC Corp disappeared)
✗ Companies merged or overwritten

---

TEST 1-6: Email Verification - XYZ Manufacturing Admin
STEPS:
1. Agent pauses testing
2. Agent displays: "CHECK hjoshinitin1999@gmail.com INBOX"
3. USER ACTION: Check inbox for Sarah Johnson credentials
4. USER ACTION: Copy password to credentials tracker

SUCCESS CRITERIA:
✓ Email received at hjoshinitin1999@gmail.com within 2 minutes
✓ Email contains credentials for Sarah Johnson
✓ Password is different from ABC Corp admin password
✓ Email references XYZ Manufacturing or Sarah Johnson

USER CONFIRMATION:
User responds: "XYZ admin email received, password saved"

---

TEST 1-7: Data Isolation - QMS Admin Cannot Access Client Data (CRITICAL SECURITY TEST)
STEPS:
1. While logged in as QMS Super Admin (admin@idatum.com)
2. Look through all navigation menu items
3. Attempt to find "Tasks" or "Documents" or "Iterations" modules
4. If found, click on them
5. Verify NO client company data is visible

SUCCESS CRITERIA:
✓ Admin dashboard shows ONLY company management features:
  - Organization Onboarding
  - Companies List
  - Platform Settings
  - User Management (QMS staff only)
✓ NO client-specific modules accessible:
  - No Tasks module showing ABC Corp tasks
  - No Documents module showing ABC Corp documents
  - No Iterations module
✓ Admin account isolated from client operations

FAILURE INDICATORS (CRITICAL SECURITY ISSUE):
✗ Can see ABC Corp task list from admin account
✗ Can access ABC Corp documents
✗ Can view ABC Corp iterations or user data
✗ Any client company operational data visible to QMS Admin

→ If ANY client data is visible to QMS Admin, mark this test as FAILED CRITICAL
→ This indicates broken multi-tenant isolation

---

TEST 1-8: Module Access Verification
STEPS:
1. From QMS Admin dashboard, review full navigation menu
2. Count total accessible modules
3. Verify core admin modules present

SUCCESS CRITERIA:
✓ Following modules ARE visible:
  - Organization Onboarding
  - Companies / Company Management
  - Settings / Platform Configuration
  - (Optional) QMS Staff Management
  - (Optional) System Logs
  - (Optional) Billing/Subscriptions
✓ Total admin modules: At least 5-8 visible
✓ Following modules are NOT visible:
  - Tasks (client feature)
  - Iterations (client feature)
  - Documents (client feature)
  - Department Management (client feature)

---

TEST 1-9: Platform Configuration Access
STEPS:
1. Navigate to Settings → Modules or Settings → Platform Configuration
2. View module configuration page
3. Verify configuration options load without errors
4. (Optional) Toggle a test setting and save

SUCCESS CRITERIA:
✓ Settings page loads successfully
✓ Module configuration options visible (toggles, dropdowns, etc.)
✓ Page displays without errors
✓ If settings changed, save operation completes successfully
✓ No 403/404 errors on settings access

---

TEST 1-10: Logout & JWT Token Invalidation (CRITICAL SECURITY TEST)
STEPS:
1. Locate user profile icon or user menu (top-right corner)
2. Click profile menu
3. Click "Logout" or "Sign Out" button
4. Wait for redirect to login page
5. After logout, click browser BACK button
6. Attempt to navigate directly to /dashboard URL

SUCCESS CRITERIA:
✓ Logout completes successfully
✓ Redirected to login page after logout
✓ Browser back button does NOT show dashboard with live data
✓ Attempting to access /dashboard URL redirects to login page
✓ Message displayed: "Session expired" or "Please login" or "Unauthorized"
✓ JWT token invalidated (cannot access protected routes)

FAILURE INDICATORS (CRITICAL SECURITY ISSUE):
✗ Can access dashboard after logout using back button
✗ Protected routes accessible without re-authentication
✗ Dashboard data visible after logout
✗ No redirect to login page

→ If dashboard accessible after logout, mark FAILED CRITICAL
→ This indicates JWT tokens not properly invalidated

---

SESSION 1 COMPLETION CHECKLIST:
Agent should output the following summary:

========================================
SESSION 1 RESULTS: QMS Super Admin Tests
========================================

TESTS EXECUTED: 10
TESTS PASSED: __/10
TESTS FAILED: __/10
CRITICAL FAILURES: __/2 (Tests 1-7, 1-10)

DETAILED RESULTS:
✓/✗ Test 1-1: Admin Login & Dashboard
✓/✗ Test 1-2: ABC Corp Creation
✓/✗ Test 1-3: ABC Corp Email Delivery
✓/✗ Test 1-4: ABC Corp Listing
✓/✗ Test 1-5: XYZ Manufacturing Creation
✓/✗ Test 1-6: XYZ Email Delivery
✓/✗ Test 1-7: Data Isolation (QMS→Client) [CRITICAL]
✓/✗ Test 1-8: Module Access
✓/✗ Test 1-9: Platform Configuration
✓/✗ Test 1-10: JWT Invalidation [CRITICAL]

CREDENTIALS COLLECTED:
- ABC Corp Admin (John Smith): himanshusochi@gmail.com / [PASSWORD FROM EMAIL]
- XYZ Admin (Sarah Johnson): hjoshinitin1999@gmail.com / [PASSWORD FROM EMAIL]

CRITICAL ISSUES FOUND:
[List any Test 1-7 or 1-10 failures here]

STATUS: Ready for Session 2 / Blocked by critical failures
========================================

NEXT STEP: Proceed to Session 2 using ABC Corp credentials
